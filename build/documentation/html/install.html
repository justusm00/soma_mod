<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: Installation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Installation </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="CMake"></a>
SOMA uses CMake for Building</h1>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000006">Deprecated:</a></b></dt><dd>Former versions of SOMA used to ship with an HDF5 copy and a Unix Makefile. Both is now deprecated and no longer supported.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Building SOMA is designed for out of source building and Unix/Linux systems only. Any other method is currently not supported or tested by the developers.</dd></dl>
<p>This page is intended to help the user install SOMA. Before the actual installation of the SOMA package, please install and setup the dependency of SOMA.</p>
<h2><a class="anchor" id="Dependency"></a>
Dependencies</h2>
<h3><a class="anchor" id="MPI"></a>
Message Passing Interface (MPI)</h3>
<p >SOMA is an HPC application utilizing multiple levels of parallelism. As a consequence, the Message Passing Interface MPI is used for parallelism across non-shared memory systems and across multiple GPUs. Because parallel IO is important, your version of MPI needs the parallel IO components.</p>
<p >We will not explain how to install MPI here, but installation instructions can be found for the different MPI implementations. Or you can install the corresponding package of your distribution. Just make sure parallel IO is supported.</p>
<p >For example:</p><ul>
<li><a href="www.open-mpi.org">OpenMPI </a></li>
<li><a href="www.mpich.org">MPICH </a></li>
</ul>
<h3><a class="anchor" id="HDF5"></a>
HDF5 Library</h3>
<p >HDF5 is a data format to store complex binary data in convenient containers. SOMA uses the functionality to read and write configurational and analysis data. In addition, to the easy to use and flexible binary containers HDF5 supports parallel IO via the MPI parallel IO interface. SOMA uses this functionality intensively and would not work without it.</p>
<p >In this section the basic installation of hdf5 is explained. To get the newest version of the library you can download directly from the <a href="https://www.hdfgroup.org/">hdf5group</a>. You can find the download page <a href="https://www.hdfgroup.org/downloads/">here </a>. For more information and especially also parallel build questions refer the hdf5 <a href=" https://www.hdfgroup.org/HDF5-FAQ.html">FAQ</a>.</p>
<p >SOMA has been tested with HDF5 version 1.8.16. And here I will briefly explain how to install hdf5. You may follow them, or find your own way to install a parallel version of hdf5.</p>
<ul>
<li>The first step is to download and unpack the source from the HDF5 group.</li>
<li>Configure you MPI wrappers such that "mpicc" calls the compiler you want.</li>
<li>Enter the directory of the source.</li>
<li>Configure the build <div class="fragment"><div class="line">./configure CC=mpicc --enable-parallel --prefix=/path/to/hdf5install</div>
</div><!-- fragment --></li>
<li>Compile hdf5. That may take a while. <div class="fragment"><div class="line">make</div>
</div><!-- fragment --></li>
<li>Install HDF5 <div class="fragment"><div class="line">make install</div>
</div><!-- fragment --></li>
</ul>
<h3><a class="anchor" id="H5PY"></a>
Python HDF5 Binding</h3>
<p >For several of the python scripts, which are required to configure input scripts for SOMA the "h5py" library is required. Some of the scripts may also be helpful to analyze the results produced by SOMA.</p>
<p >Although, for running SOMA on a server you don't need this library. But you will need some machine with this library. You can obtain via your package manager or download from <a href="http://www.h5py.org/">here</a> and install it yourself.</p>
<h2><a class="anchor" id="Build"></a>
Building SOMA.</h2>
<p >SOMA is designed for the out of source compilation using CMake. So CMake is required to build SOMA. This section will step by step guide you to build and install SOMA.</p>
<ul>
<li>Git checkout your desired branch our tag of SOMA. Suggested is the latest tag or the "master" branch. <div class="fragment"><div class="line">git checkout master</div>
</div><!-- fragment --></li>
<li>Create your build directory. And enter it. <div class="fragment"><div class="line">mkdir build</div>
<div class="line">cd build</div>
</div><!-- fragment --></li>
<li>Configure CMake. This step depends on the type of build:<ul>
<li>If you want a standard build with your standard compiler and you have system wide installed parallel hdf5. <div class="fragment"><div class="line">cmake -DCMAKE_INSTALL_PREFIX=/path/to/SOMAinstall ../</div>
</div><!-- fragment --></li>
<li>If you want to use a specific compiler, for example "pgcc" set it. <div class="fragment"><div class="line">export CC=my_compiler</div>
<div class="line">cmake -DCMAKE_INSTALL_PREFIX=/path/to/SOMAinstall ../</div>
</div><!-- fragment --></li>
<li>If you are not using a system wide HDF5 installation (refer <a class="el" href="install.html#HDF5">HDF5 Library</a>) set the "HDF5_ROOT" variable. <div class="fragment"><div class="line">HDF5_ROOT=/path/to/hdf5install cmake -DCMAKE_INSTALL_PREFIX=/path/to/SOMAinstall ../</div>
</div><!-- fragment --> It is important that the path is HDF5_ROOT is absolute. <dl class="section note"><dt>Note</dt><dd>Sometimes problems occur and the wrong library of hdf5 is found. Try to guide cmake appropriately.</dd></dl>
</li>
<li>Now you can easily modify the options of SOMA build using <div class="fragment"><div class="line">ccmake .</div>
</div><!-- fragment --></li>
</ul>
</li>
<li>Build SOMA: <div class="fragment"><div class="line">make</div>
</div><!-- fragment --></li>
<li>Install SOMA: <div class="fragment"><div class="line">make install</div>
</div><!-- fragment --></li>
</ul>
<p >Now you find the SOMA executables at "/path/to/SOMAinstall/bin" and if you haven't deactivated the installation of the python scripts you can find them at "/path/to/SOMAinstall/python-script". You may want to set your PATH accordingly.</p>
<h3><a class="anchor" id="Doc"></a>
Compiling the Documentation</h3>
<p >To compile the documentation you need doxygen and then can run in the build directory </p><div class="fragment"><div class="line">make doc </div>
</div><!-- fragment --><p> As a result, you find a html and a latex documentation in the "documentation" folder. </p><dl class="section note"><dt>Note</dt><dd>For building the documentation a working Doxygen and Dot installation is needed.</dd></dl>
<h1><a class="anchor" id="Server"></a>
Building on Known Severs</h1>
<p >For the common servers we have access to and we use. There are scripts that help building and running SOMA. Those scripts can be found in the "setups" directory of SOMA. They are intended to be source before a building or running SOMA.</p>
<h2><a class="anchor" id="taurus"></a>
Compilation on the taurus Cluster (TU-Dresden)</h2>
<p >The taurus cluster in dresden is ready to be used with SOMA. The modules required for the installation and running can be found in the file "taurus.sh". As a consequence, sourcing this files </p><div class="fragment"><div class="line">source taurus.sh </div>
</div><!-- fragment --><p> should set up the correct environment for compiling and running SOMA. The HDF5 on taurus is not suitable for our purpose. So you need to build your own parallel version yourself.</p>
<h2><a class="anchor" id="jureca"></a>
Compilation on the jureca Cluster (HPC Jülich)</h2>
<p >Similar to taurus the simple "jureca.sh" file can be sourced for compiling and running SOMA. </p><div class="fragment"><div class="line">source jureca.sh</div>
</div><!-- fragment --><p >The PGI tool chain of jureca does not have a suitable parallel hdf5 library. So you need to build one before you can build SOMA.</p>
<h2><a class="anchor" id="theorie"></a>
Compilation on our local GPU clusters. (GAU-Göttingen)</h2>
<p >Our local GPU cluster (cuda01-cuda05) features a PGI compiler. So you can use it to run SOMA simulation on our GPUs. To setup the environment on the cluster use:</p>
<div class="fragment"><div class="line">source theorie.sh</div>
</div><!-- fragment --><p >There is no precompiled parallel HDF library, so you have to compile it. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Feb 10 2023 10:47:50 for My Project by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
