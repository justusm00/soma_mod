<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: Work Flow</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Work Flow </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="Basics"></a>
Basics</h1>
<p >This section describes the general work flow for a simulation.</p><ul>
<li>Build your simulation. For details refer the <a class="el" href="install.html">Installation</a> page.</li>
<li>Create yourself a configuration by a) using the old SCMF format (only linear chains supported) or b) use XML input files.<br  />
 <div class="fragment"><div class="line">./ConfGen.py -i coord.xml </div>
</div><!-- fragment --> Generates you an "coord.h5" input file out of a ".xml" input file. For more details about the "ConfGen.py" script run <div class="fragment"><div class="line">./ConfGen.py --help</div>
</div><!-- fragment --> If you want to know more about the input format refer to <a class="el" href="input.html">XML Input Format</a>.<ul>
<li>If you have used the old format: Convert the coord.dat to a coord.h5 by using the "CONVERT" tool. <div class="fragment"><div class="line">./CONVERT coord.dat &lt;geometry.dat&gt;</div>
</div><!-- fragment --></li>
<li>An example old format file is "coord.dat".</li>
<li>Additionally you can add a geometry file for CONVERT. This adds a forbidden area and external fields. For details ask Ulrich.</li>
</ul>
</li>
<li>An hdf5 analysis file is automatically created by the ConvGen.py tool, if you have converted and xml-file. If you work with an old ".dat" file, you need to create an xml file, which describes the same configuration like your ".dat" file. In this file you can add an analysis section describing the analysis file. You can suppress the creation of the configuration file in this step, refer "./ConfGen.py --help" for details. <dl class="section note"><dt>Note</dt><dd>The configuration in the xml has to match the later used configuration for this file. Otherwise, using the file might cause problems.</dd></dl>
</li>
<li>Now you should have a "coord.h5" with your configuration and a "coord_ana.h5" with your specification how the analysis is performed.<ul>
<li>The "ana.h5" will contain all your results after the run so handle it with care.</li>
<li>For more details about the analysis file refer also the Density-Field Analysis section on this page.</li>
</ul>
</li>
<li>Now you can finally run your simulation by using <div class="fragment"><div class="line">mpiexec/srun -n [N] ./SOMA -c coord.h5 -a coord_ana.h5 -t #steps [options]</div>
</div><!-- fragment --><ul>
<li>Also run <div class="fragment"><div class="line">./SOMA --help </div>
</div><!-- fragment --> for more options, especially if you want to run with GPU support.</li>
</ul>
</li>
<li>After your run analyze your observables in the "ana.h5" file.<ul>
<li>The "ana.h5" are intended to be used for only a single run or subsequent runs of the same configuration. As consequence SOMA appends data to the configuring file. It is up to the user to make sure that data on a single files really represents a time sequence of data points.</li>
<li>For all scalare obsevables of your analysis, you can use h5dump handleAnah5.py or hdfview to postprocess your data.</li>
<li>For the density fields we recommend the function "get_mayavi_matrix" of handleAnaH5.py, which returns you a specific numpy array containing the data.</li>
<li>Or you can plot your density fields directly via for example <a href="http://www.paraview.org">paraview</a> by creating a corresponding light-data <a href="http://www.xdfm.org">xdmf</a> file. <div class="fragment"><div class="line">./create_xdmf.py -a ana.h5 </div>
</div><!-- fragment --> The script touches only light data so no worries about large files. The result would be "ana.xmf", which can be directly imported by "paraview". If you would like to visualize your external fields or area51 as well, you may add your configuration file, via the "-c" option.</li>
<li>For further details about the hdf5 files and tools to analyze those refer the <a class="el" href="hdf5.html">The HDF5 File-Format</a> page.</li>
</ul>
</li>
<li>The final configuration is saved in the file "end.h5"</li>
</ul>
<h2><a class="anchor" id="Density-Field"></a>
Analysis</h2>
<p >With the program a routine to write the density fields to disk is shipped.</p>
<p >The output format of this routine is again hdf5. And it writes out the field of all types with the most important attributes. However, the density field might not be a 3d-matrix as one might expect, because it represents the cache-optimized memory layout in the simulation. Conversion tools for the output are discussed on the <a class="el" href="hdf5.html">The HDF5 File-Format</a> page.</p>
<dl class="section note"><dt>Note</dt><dd>By default SOMA appends always analyzed data to a given hdf5 file. But in case of the density fields that only works, if the previous dimension of the density field match with the actual dimension. If the dimension differ you will be warned and no data is written to disc. </dd></dl>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Feb 7 2023 16:51:26 for My Project by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
