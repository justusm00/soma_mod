\hypertarget{rng_8h}{}\doxysection{rng.\+h File Reference}
\label{rng_8h}\index{rng.h@{rng.h}}


Definition of pseudo random number generation wrappers for soma.  


{\ttfamily \#include \char`\"{}soma\+\_\+config.\+h\char`\"{}}\newline
{\ttfamily \#include $<$stdint.\+h$>$}\newline
{\ttfamily \#include \char`\"{}cmdline.\+h\char`\"{}}\newline
Include dependency graph for rng.\+h\+:
% FIG 0
This graph shows which files directly or indirectly include this file\+:
% FIG 1
\doxysubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structPCG__STATE}{PCG\+\_\+\+STATE}}
\begin{DoxyCompactList}\small\item\em State of the random number generator (PCG) \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structRNG__STATE}{RNG\+\_\+\+STATE}}
\begin{DoxyCompactList}\small\item\em Struct which contains the random number generators. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{rng_8h_a4476951367174cc34c9d5fa89b1589cb}\label{rng_8h_a4476951367174cc34c9d5fa89b1589cb}} 
typedef struct \mbox{\hyperlink{structPCG__STATE}{PCG\+\_\+\+STATE}} {\bfseries PCG\+\_\+\+STATE}
\begin{DoxyCompactList}\small\item\em State of the random number generator (PCG) \end{DoxyCompactList}\item 
typedef struct \mbox{\hyperlink{structRNG__STATE}{RNG\+\_\+\+STATE}} \mbox{\hyperlink{rng_8h_a9ee20324887a702022f322a5c7c56450}{RNG\+\_\+\+STATE}}
\begin{DoxyCompactList}\small\item\em Struct which contains the random number generators. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{rng_8h_a70181f00c64a47ea8995091311101a9a}{soma\+\_\+seed\+\_\+rng}} (\mbox{\hyperlink{structPCG__STATE}{PCG\+\_\+\+STATE}} $\ast$rng, uint64\+\_\+t seed, uint64\+\_\+t stream)
\item 
unsigned int \mbox{\hyperlink{rng_8h_a4eb6fca92f015143041408f5a945a55b}{soma\+\_\+rng\+\_\+uint}} (\mbox{\hyperlink{structRNG__STATE}{RNG\+\_\+\+STATE}} $\ast$state, const struct \mbox{\hyperlink{structPhase}{Phase}} $\ast$const p)
\item 
unsigned int \mbox{\hyperlink{rng_8h_a8db3f4bd5d5d35f5c2be34b72c1308e2}{soma\+\_\+rng\+\_\+uint\+\_\+max}} (void)
\item 
\mbox{\hyperlink{soma__config_8h_a59e3fe53d267a97ff32b8a16fea1f683}{soma\+\_\+scalar\+\_\+t}} \mbox{\hyperlink{rng_8h_acbd85a901fd3ddca22c2a569458f7f47}{soma\+\_\+rng\+\_\+soma\+\_\+scalar}} (\mbox{\hyperlink{structRNG__STATE}{RNG\+\_\+\+STATE}} $\ast$rng, const struct \mbox{\hyperlink{structPhase}{Phase}} $\ast$const p)
\item 
void \mbox{\hyperlink{rng_8h_a03d1b483d22d87e0df0aba38c9e819a3}{soma\+\_\+normal\+\_\+vector}} (\mbox{\hyperlink{structRNG__STATE}{RNG\+\_\+\+STATE}} $\ast$rng, const struct \mbox{\hyperlink{structPhase}{Phase}} $\ast$const p, \mbox{\hyperlink{soma__config_8h_a59e3fe53d267a97ff32b8a16fea1f683}{soma\+\_\+scalar\+\_\+t}} $\ast$x, \mbox{\hyperlink{soma__config_8h_a59e3fe53d267a97ff32b8a16fea1f683}{soma\+\_\+scalar\+\_\+t}} $\ast$y, \mbox{\hyperlink{soma__config_8h_a59e3fe53d267a97ff32b8a16fea1f683}{soma\+\_\+scalar\+\_\+t}} $\ast$z)
\item 
uint32\+\_\+t \mbox{\hyperlink{rng_8h_a76961b396d499ca2670459d5b6fde9e0}{pcg32\+\_\+random}} (\mbox{\hyperlink{structPCG__STATE}{PCG\+\_\+\+STATE}} $\ast$rng)
\item 
unsigned int \mbox{\hyperlink{rng_8h_a8a4144bec096db1af9bbd932a0fe5b03}{rng\+\_\+state\+\_\+serial\+\_\+length}} (const struct \mbox{\hyperlink{structPhase}{Phase}} $\ast$const p)
\item 
int \mbox{\hyperlink{rng_8h_a0312c1dbde1e299a3b737123caebbd0d}{serialize\+\_\+rng\+\_\+state}} (struct \mbox{\hyperlink{structPhase}{Phase}} $\ast$const p, const \mbox{\hyperlink{structRNG__STATE}{RNG\+\_\+\+STATE}} $\ast$const state, unsigned char $\ast$const buffer)
\item 
int \mbox{\hyperlink{rng_8h_a09f392a261ace0ac17894388a3cef4c7}{deserialize\+\_\+rng\+\_\+state}} (struct \mbox{\hyperlink{structPhase}{Phase}} $\ast$const p, \mbox{\hyperlink{structRNG__STATE}{RNG\+\_\+\+STATE}} $\ast$const state, const unsigned char $\ast$const buffer)
\item 
int \mbox{\hyperlink{rng_8h_a375712ccc55e121580ae68841a06a122}{seed\+\_\+rng\+\_\+state}} (struct \mbox{\hyperlink{structRNG__STATE}{RNG\+\_\+\+STATE}} $\ast$const state, const unsigned int seed, const unsigned int stream, const struct \mbox{\hyperlink{structPhase}{Phase}} $\ast$const p)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Definition of pseudo random number generation wrappers for soma. 



\doxysubsection{Typedef Documentation}
\mbox{\Hypertarget{rng_8h_a9ee20324887a702022f322a5c7c56450}\label{rng_8h_a9ee20324887a702022f322a5c7c56450}} 
\index{rng.h@{rng.h}!RNG\_STATE@{RNG\_STATE}}
\index{RNG\_STATE@{RNG\_STATE}!rng.h@{rng.h}}
\doxysubsubsection{\texorpdfstring{RNG\_STATE}{RNG\_STATE}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{structRNG__STATE}{RNG\+\_\+\+STATE}} \mbox{\hyperlink{structRNG__STATE}{RNG\+\_\+\+STATE}}}



Struct which contains the random number generators. 

Option to select the pseudo random number enerator (possible values=\char`\"{}\+PCG32\char`\"{}, \char`\"{}\+MT\char`\"{} default=`PCG32') Defualt is PCG32. For every other {\itshape alternative} RNG the state only stores an offset to the global array of RNGs. See \mbox{\hyperlink{rng__alternative_8h}{rng\+\_\+alternative.\+h}} for details. 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{rng_8h_a09f392a261ace0ac17894388a3cef4c7}\label{rng_8h_a09f392a261ace0ac17894388a3cef4c7}} 
\index{rng.h@{rng.h}!deserialize\_rng\_state@{deserialize\_rng\_state}}
\index{deserialize\_rng\_state@{deserialize\_rng\_state}!rng.h@{rng.h}}
\doxysubsubsection{\texorpdfstring{deserialize\_rng\_state()}{deserialize\_rng\_state()}}
{\footnotesize\ttfamily int deserialize\+\_\+rng\+\_\+state (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structPhase}{Phase}} $\ast$const}]{p,  }\item[{\mbox{\hyperlink{structRNG__STATE}{RNG\+\_\+\+STATE}} $\ast$const}]{state,  }\item[{const unsigned char $\ast$const}]{buffer }\end{DoxyParamCaption})}

Deserialize an \mbox{\hyperlink{structRNG__STATE}{RNG\+\_\+\+STATE}} from a raw memory buffer.


\begin{DoxyParams}{Parameters}
{\em p} & System. \\
\hline
{\em state} & State to initialize by memory buffer. \\
\hline
{\em buffer} & Initialized memory buffer to read. \\
\hline
\end{DoxyParams}
\begin{DoxyPrecond}{Precondition}
You are owner of {\itshape state}. And there is no deep copy data allocated. Otherwise, you create memory leaks. 
\end{DoxyPrecond}
\begin{DoxyPostcond}{Postcondition}
You are owner of the state including deep copy data, because deep copy data is allocated. 
\end{DoxyPostcond}
\begin{DoxyReturn}{Returns}
Number of written bytes. If \texorpdfstring{$<$}{<} 0 Errorcode. 
\end{DoxyReturn}
\mbox{\Hypertarget{rng_8h_a76961b396d499ca2670459d5b6fde9e0}\label{rng_8h_a76961b396d499ca2670459d5b6fde9e0}} 
\index{rng.h@{rng.h}!pcg32\_random@{pcg32\_random}}
\index{pcg32\_random@{pcg32\_random}!rng.h@{rng.h}}
\doxysubsubsection{\texorpdfstring{pcg32\_random()}{pcg32\_random()}}
{\footnotesize\ttfamily uint32\+\_\+t pcg32\+\_\+random (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structPCG__STATE}{PCG\+\_\+\+STATE}} $\ast$}]{rng }\end{DoxyParamCaption})}

Function to advances the PCG32 by 1 step and returns a random number


\begin{DoxyParams}{Parameters}
{\em rng} & PCG32 state to advance \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
random number 
\end{DoxyReturn}
\mbox{\Hypertarget{rng_8h_a8a4144bec096db1af9bbd932a0fe5b03}\label{rng_8h_a8a4144bec096db1af9bbd932a0fe5b03}} 
\index{rng.h@{rng.h}!rng\_state\_serial\_length@{rng\_state\_serial\_length}}
\index{rng\_state\_serial\_length@{rng\_state\_serial\_length}!rng.h@{rng.h}}
\doxysubsubsection{\texorpdfstring{rng\_state\_serial\_length()}{rng\_state\_serial\_length()}}
{\footnotesize\ttfamily unsigned int rng\+\_\+state\+\_\+serial\+\_\+length (\begin{DoxyParamCaption}\item[{const struct \mbox{\hyperlink{structPhase}{Phase}} $\ast$const}]{p }\end{DoxyParamCaption})}

Obtain the number of bytes, which are necessary to serialize a \mbox{\hyperlink{structRNG__STATE}{RNG\+\_\+\+STATE}}.

the current system configuration might influence the result. Especially, special RNGs. (Deep copy included.) 
\begin{DoxyParams}{Parameters}
{\em p} & System configuration. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Number of bytes. 
\end{DoxyReturn}
\mbox{\Hypertarget{rng_8h_a375712ccc55e121580ae68841a06a122}\label{rng_8h_a375712ccc55e121580ae68841a06a122}} 
\index{rng.h@{rng.h}!seed\_rng\_state@{seed\_rng\_state}}
\index{seed\_rng\_state@{seed\_rng\_state}!rng.h@{rng.h}}
\doxysubsubsection{\texorpdfstring{seed\_rng\_state()}{seed\_rng\_state()}}
{\footnotesize\ttfamily int seed\+\_\+rng\+\_\+state (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structRNG__STATE}{RNG\+\_\+\+STATE}} $\ast$const}]{state,  }\item[{const unsigned int}]{seed,  }\item[{const unsigned int}]{stream,  }\item[{const struct \mbox{\hyperlink{structPhase}{Phase}} $\ast$const}]{p }\end{DoxyParamCaption})}

Function to seed the PRNG properly


\begin{DoxyParams}{Parameters}
{\em state} & RNG state to seed \\
\hline
{\em seed} & seed for the rng \\
\hline
{\em stream} & PCG32 is streamable for the many independent RNGs \\
\hline
{\em p} & \mbox{\hyperlink{structPhase}{Phase}} the system belongs to \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Errorcode 
\end{DoxyReturn}
\mbox{\Hypertarget{rng_8h_a0312c1dbde1e299a3b737123caebbd0d}\label{rng_8h_a0312c1dbde1e299a3b737123caebbd0d}} 
\index{rng.h@{rng.h}!serialize\_rng\_state@{serialize\_rng\_state}}
\index{serialize\_rng\_state@{serialize\_rng\_state}!rng.h@{rng.h}}
\doxysubsubsection{\texorpdfstring{serialize\_rng\_state()}{serialize\_rng\_state()}}
{\footnotesize\ttfamily int serialize\+\_\+rng\+\_\+state (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structPhase}{Phase}} $\ast$const}]{p,  }\item[{const \mbox{\hyperlink{structRNG__STATE}{RNG\+\_\+\+STATE}} $\ast$const}]{state,  }\item[{unsigned char $\ast$const}]{buffer }\end{DoxyParamCaption})}

Serialize an \mbox{\hyperlink{structRNG__STATE}{RNG\+\_\+\+STATE}} to a raw memory buffer.


\begin{DoxyParams}{Parameters}
{\em p} & System. \\
\hline
{\em state} & State to serialize. \\
\hline
{\em buffer} & Preallocated buffer to store the outcome. \\
\hline
\end{DoxyParams}
\begin{DoxyPrecond}{Precondition}
Allocation of buffer with return value of \mbox{\hyperlink{rng_8h_a8a4144bec096db1af9bbd932a0fe5b03}{rng\+\_\+state\+\_\+serial\+\_\+length()}} minimum. 
\end{DoxyPrecond}
\begin{DoxyNote}{Note}
Ownership and allocation status is unchanged. 
\end{DoxyNote}
\begin{DoxyReturn}{Returns}
Number of written bytes. If \texorpdfstring{$<$}{<} 0 Errorcode. 
\end{DoxyReturn}
\mbox{\Hypertarget{rng_8h_a03d1b483d22d87e0df0aba38c9e819a3}\label{rng_8h_a03d1b483d22d87e0df0aba38c9e819a3}} 
\index{rng.h@{rng.h}!soma\_normal\_vector@{soma\_normal\_vector}}
\index{soma\_normal\_vector@{soma\_normal\_vector}!rng.h@{rng.h}}
\doxysubsubsection{\texorpdfstring{soma\_normal\_vector()}{soma\_normal\_vector()}}
{\footnotesize\ttfamily void soma\+\_\+normal\+\_\+vector (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structRNG__STATE}{RNG\+\_\+\+STATE}} $\ast$}]{rng,  }\item[{const struct \mbox{\hyperlink{structPhase}{Phase}} $\ast$const}]{p,  }\item[{\mbox{\hyperlink{soma__config_8h_a59e3fe53d267a97ff32b8a16fea1f683}{soma\+\_\+scalar\+\_\+t}} $\ast$}]{x,  }\item[{\mbox{\hyperlink{soma__config_8h_a59e3fe53d267a97ff32b8a16fea1f683}{soma\+\_\+scalar\+\_\+t}} $\ast$}]{y,  }\item[{\mbox{\hyperlink{soma__config_8h_a59e3fe53d267a97ff32b8a16fea1f683}{soma\+\_\+scalar\+\_\+t}} $\ast$}]{z }\end{DoxyParamCaption})}

Function that adds a 3D gaussian vector to the vector (x,y,z) 
\begin{DoxyParams}{Parameters}
{\em rng} & struct which contains all information about the internal states of the rngs \\
\hline
{\em p} & \mbox{\hyperlink{structPhase}{Phase}} struct of the simulated system \\
\hline
{\em x} & coordinate of the vector \\
\hline
{\em y} & coordinate of the vector \\
\hline
{\em z} & coordinate of the vector \\
\hline
\end{DoxyParams}
\begin{DoxyPrecond}{Precondition}
rng has been seeded
\end{DoxyPrecond}
generate 3D vector, 2 times Box-\/\+Mueller Transform, discards one value \mbox{\Hypertarget{rng_8h_acbd85a901fd3ddca22c2a569458f7f47}\label{rng_8h_acbd85a901fd3ddca22c2a569458f7f47}} 
\index{rng.h@{rng.h}!soma\_rng\_soma\_scalar@{soma\_rng\_soma\_scalar}}
\index{soma\_rng\_soma\_scalar@{soma\_rng\_soma\_scalar}!rng.h@{rng.h}}
\doxysubsubsection{\texorpdfstring{soma\_rng\_soma\_scalar()}{soma\_rng\_soma\_scalar()}}
{\footnotesize\ttfamily \mbox{\hyperlink{soma__config_8h_a59e3fe53d267a97ff32b8a16fea1f683}{soma\+\_\+scalar\+\_\+t}} soma\+\_\+rng\+\_\+soma\+\_\+scalar (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structRNG__STATE}{RNG\+\_\+\+STATE}} $\ast$}]{rng,  }\item[{const struct \mbox{\hyperlink{structPhase}{Phase}} $\ast$const}]{p }\end{DoxyParamCaption})}

Wrapper function for float random numbers. 
\begin{DoxyParams}{Parameters}
{\em rng} & struct which contains all information about the internal states of the rngs \\
\hline
{\em p} & \mbox{\hyperlink{structPhase}{Phase}} struct of the simulated system \\
\hline
\end{DoxyParams}
\begin{DoxyPrecond}{Precondition}
rng has been seeded. 
\end{DoxyPrecond}
\begin{DoxyReturn}{Returns}
prng in range \mbox{[}0,1) 
\end{DoxyReturn}
\mbox{\Hypertarget{rng_8h_a4eb6fca92f015143041408f5a945a55b}\label{rng_8h_a4eb6fca92f015143041408f5a945a55b}} 
\index{rng.h@{rng.h}!soma\_rng\_uint@{soma\_rng\_uint}}
\index{soma\_rng\_uint@{soma\_rng\_uint}!rng.h@{rng.h}}
\doxysubsubsection{\texorpdfstring{soma\_rng\_uint()}{soma\_rng\_uint()}}
{\footnotesize\ttfamily unsigned int soma\+\_\+rng\+\_\+uint (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structRNG__STATE}{RNG\+\_\+\+STATE}} $\ast$}]{state,  }\item[{const struct \mbox{\hyperlink{structPhase}{Phase}} $\ast$const}]{p }\end{DoxyParamCaption})}

Wrapper for any prng we use for soma.

\begin{DoxyPrecond}{Precondition}
rng has been seeded. 
\end{DoxyPrecond}

\begin{DoxyParams}{Parameters}
{\em state} & \mbox{\hyperlink{structRNG__STATE}{RNG\+\_\+\+STATE}} to use and modify for PRNG \\
\hline
{\em p} & \mbox{\hyperlink{structPhase}{Phase}} construct of the simulated system \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
prng as uint in range \mbox{[}0\+:soma\+\_\+rng\+\_\+uint\+\_\+max) 
\end{DoxyReturn}
\mbox{\Hypertarget{rng_8h_a8db3f4bd5d5d35f5c2be34b72c1308e2}\label{rng_8h_a8db3f4bd5d5d35f5c2be34b72c1308e2}} 
\index{rng.h@{rng.h}!soma\_rng\_uint\_max@{soma\_rng\_uint\_max}}
\index{soma\_rng\_uint\_max@{soma\_rng\_uint\_max}!rng.h@{rng.h}}
\doxysubsubsection{\texorpdfstring{soma\_rng\_uint\_max()}{soma\_rng\_uint\_max()}}
{\footnotesize\ttfamily unsigned int soma\+\_\+rng\+\_\+uint\+\_\+max (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

Status function to get the max random number.

\begin{DoxyReturn}{Returns}
Maximum generated rng by soma\+\_\+rng\+\_\+uint 
\end{DoxyReturn}
\mbox{\Hypertarget{rng_8h_a70181f00c64a47ea8995091311101a9a}\label{rng_8h_a70181f00c64a47ea8995091311101a9a}} 
\index{rng.h@{rng.h}!soma\_seed\_rng@{soma\_seed\_rng}}
\index{soma\_seed\_rng@{soma\_seed\_rng}!rng.h@{rng.h}}
\doxysubsubsection{\texorpdfstring{soma\_seed\_rng()}{soma\_seed\_rng()}}
{\footnotesize\ttfamily int soma\+\_\+seed\+\_\+rng (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structPCG__STATE}{PCG\+\_\+\+STATE}} $\ast$}]{rng,  }\item[{uint64\+\_\+t}]{seed,  }\item[{uint64\+\_\+t}]{stream }\end{DoxyParamCaption})}

Wrapper for seeding the global random number generation.


\begin{DoxyParams}{Parameters}
{\em stream} & Stream of the RNG. \\
\hline
{\em rng} & \mbox{\hyperlink{structPCG__STATE}{PCG\+\_\+\+STATE}} to \\
\hline
{\em seed} & Seed for the global rng. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code. 
\end{DoxyReturn}
