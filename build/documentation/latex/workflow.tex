\hypertarget{workflow_Basics}{}\doxysection{Basics}\label{workflow_Basics}
This section describes the general work flow for a simulation.
\begin{DoxyItemize}
\item Build your simulation. For details refer the \mbox{\hyperlink{install}{Installation}} page.
\item Create yourself a configuration by a) using the old SCMF format (only linear chains supported) or b) use XML input files.~\newline
 
\begin{DoxyCode}{0}
\DoxyCodeLine{./ConfGen.py -\/i coord.xml }

\end{DoxyCode}
 Generates you an \char`\"{}coord.\+h5\char`\"{} input file out of a \char`\"{}.\+xml\char`\"{} input file. For more details about the \char`\"{}\+Conf\+Gen.\+py\char`\"{} script run 
\begin{DoxyCode}{0}
\DoxyCodeLine{./ConfGen.py -\/-\/help}

\end{DoxyCode}
 If you want to know more about the input format refer to \mbox{\hyperlink{input}{XML Input Format}}.
\begin{DoxyItemize}
\item If you have used the old format\+: Convert the coord.\+dat to a coord.\+h5 by using the \char`\"{}\+CONVERT\char`\"{} tool. 
\begin{DoxyCode}{0}
\DoxyCodeLine{./CONVERT coord.dat <geometry.dat>}

\end{DoxyCode}

\item An example old format file is \char`\"{}coord.\+dat\char`\"{}.
\item Additionally you can add a geometry file for CONVERT. This adds a forbidden area and external fields. For details ask Ulrich.
\end{DoxyItemize}
\item An hdf5 analysis file is automatically created by the Conv\+Gen.\+py tool, if you have converted and xml-\/file. If you work with an old \char`\"{}.\+dat\char`\"{} file, you need to create an xml file, which describes the same configuration like your \char`\"{}.\+dat\char`\"{} file. In this file you can add an analysis section describing the analysis file. You can suppress the creation of the configuration file in this step, refer \char`\"{}./\+Conf\+Gen.\+py -\/-\/help\char`\"{} for details. \begin{DoxyNote}{Note}
The configuration in the xml has to match the later used configuration for this file. Otherwise, using the file might cause problems.
\end{DoxyNote}

\item Now you should have a \char`\"{}coord.\+h5\char`\"{} with your configuration and a \char`\"{}coord\+\_\+ana.\+h5\char`\"{} with your specification how the analysis is performed.
\begin{DoxyItemize}
\item The \char`\"{}ana.\+h5\char`\"{} will contain all your results after the run so handle it with care.
\item For more details about the analysis file refer also the Density-\/\+Field Analysis section on this page.
\end{DoxyItemize}
\item Now you can finally run your simulation by using 
\begin{DoxyCode}{0}
\DoxyCodeLine{mpiexec/srun -\/n [N] ./SOMA -\/c coord.h5 -\/a coord\_ana.h5 -\/t \#steps [options]}

\end{DoxyCode}

\begin{DoxyItemize}
\item Also run 
\begin{DoxyCode}{0}
\DoxyCodeLine{./SOMA -\/-\/help }

\end{DoxyCode}
 for more options, especially if you want to run with GPU support.
\end{DoxyItemize}
\item After your run analyze your observables in the \char`\"{}ana.\+h5\char`\"{} file.
\begin{DoxyItemize}
\item The \char`\"{}ana.\+h5\char`\"{} are intended to be used for only a single run or subsequent runs of the same configuration. As consequence SOMA appends data to the configuring file. It is up to the user to make sure that data on a single files really represents a time sequence of data points.
\item For all scalare obsevables of your analysis, you can use h5dump handle\+Anah5.\+py or hdfview to postprocess your data.
\item For the density fields we recommend the function \char`\"{}get\+\_\+mayavi\+\_\+matrix\char`\"{} of handle\+Ana\+H5.\+py, which returns you a specific numpy array containing the data.
\item Or you can plot your density fields directly via for example \href{http://www.paraview.org}{\texttt{ paraview}} by creating a corresponding light-\/data \href{http://www.xdfm.org}{\texttt{ xdmf}} file. 
\begin{DoxyCode}{0}
\DoxyCodeLine{./create\_xdmf.py -\/a ana.h5 }

\end{DoxyCode}
 The script touches only light data so no worries about large files. The result would be \char`\"{}ana.\+xmf\char`\"{}, which can be directly imported by \char`\"{}paraview\char`\"{}. If you would like to visualize your external fields or area51 as well, you may add your configuration file, via the \char`\"{}-\/c\char`\"{} option.
\item For further details about the hdf5 files and tools to analyze those refer the \mbox{\hyperlink{hdf5}{The HDF5 File-\/\+Format}} page.
\end{DoxyItemize}
\item The final configuration is saved in the file \char`\"{}end.\+h5\char`\"{}
\end{DoxyItemize}\hypertarget{workflow_Density-Field}{}\doxysubsection{Analysis}\label{workflow_Density-Field}
With the program a routine to write the density fields to disk is shipped.

The output format of this routine is again hdf5. And it writes out the field of all types with the most important attributes. However, the density field might not be a 3d-\/matrix as one might expect, because it represents the cache-\/optimized memory layout in the simulation. Conversion tools for the output are discussed on the \mbox{\hyperlink{hdf5}{The HDF5 File-\/\+Format}} page.

\begin{DoxyNote}{Note}
By default SOMA appends always analyzed data to a given hdf5 file. But in case of the density fields that only works, if the previous dimension of the density field match with the actual dimension. If the dimension differ you will be warned and no data is written to disc. 
\end{DoxyNote}
